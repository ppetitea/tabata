(this.webpackJsonptabata=this.webpackJsonptabata||[]).push([[0],{154:function(t,e,n){},259:function(t,e,n){},260:function(t,e,n){"use strict";n.r(e);var r=n(4),i=n(0),a=n.n(i),c=n(11),o=n.n(c),u=(n(154),n(141)),s=n(13),l=n(29),d=n(262),f=n(305),m=n(291),j=n(294),b=n(296),g=n(59),p=n(133),O=n.n(p),h=n(297),v=Object(m.a)((function(t){return{root:{flexGrow:1},menuButton:{},leftButtonContainer:{flex:1},title:{flexGrow:1,textAlign:"center"},right:{flex:1}}}));function x(t){var e=t.title,n=t.backIcon,i=v();return Object(r.jsx)("div",{className:i.root,children:Object(r.jsx)(j.a,{position:"static",children:Object(r.jsxs)(b.a,{children:[n&&Object(r.jsx)("div",{className:i.leftButtonContainer,children:Object(r.jsx)(h.a,{edge:"start",className:i.menuButton,color:"inherit","aria-label":"back",href:"/tabata",children:Object(r.jsx)(O.a,{})})}),Object(r.jsx)(g.a,{variant:"h6",className:i.title,children:e}),n&&Object(r.jsx)(g.a,{className:i.title,children:" "})]})})})}var y=n(303),I=n(298),N=n(54),B=n.n(N),T=n(300),C=n(299),S=n(74),R=n.n(S),D=Object(m.a)((function(t){return{root:{},time:{textAlign:"end"}}})),A=function(t){var e=D(),n=t.title,i=t.time,a=t.onPress,c=void 0===a?function(){}:a,o=t.onDelete,u=void 0===o?function(){}:o;return Object(r.jsxs)(I.a,{button:!0,onClick:c,children:[Object(r.jsx)(C.a,{primary:n}),Object(r.jsx)(C.a,{className:e.time,primary:"".concat(i/1e3,"s")}),Object(r.jsx)(T.a,{children:Object(r.jsx)(h.a,{edge:"end","aria-label":"comments",onClick:u,children:Object(r.jsx)(R.a,{})})})]})},L=n(35),w=n(309),k=n(301),E=n(302),K=n(307),P=n(304),W=n(142),G=n(58),_=n(23),q=n(7),F=n(18),V=function(t){return{fromLastState:function(e){return Object.assign(t,e),t},re:function(e){return Object.assign(t,e),t},fromCollection:function(e,n){return t.re(e.find((function(e){return n(t.re(e))})))},fromCollectionById:function(e,n){return t.fromCollection(e,(function(t){return t.getId()===n}))},fromCollectionByKey:function(e,n){return t.fromCollection(e,(function(t){return t.getKey()===n}))}}},z=function(t){return{getTitle:function(){return t.title},setTitle:function(e){return t.title=e,t}}},J=function(t){return{getId:function(){return t.id},setId:function(e){return t.id=e,t}}},M=function(t){return{setVisible:function(e){return t.visible=e,t},hide:function(){return t.setVisible(!1)},show:function(){return t.setVisible(!0)}}},U=function(t){return{getDuration:function(){return t.duration},setDuration:function(e){return t.duration=e,t}}},H=function(t){return{getCollection:function(e){return t[e]},getFirst:function(e){return t[e].length>=1?t[e][0]:null},getLast:function(e){var n=t[e].length;return n>=1?t[e][n-1]:null},setCollection:function(e,n){return t[e]=n,t},getItemById:function(e,n){var r,i=Object(_.a)(t[e]);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.getId()===n)return a}}catch(c){i.e(c)}finally{i.f()}},getItemByKey:function(e,n){var r,i=Object(_.a)(t[e]);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.getKey()===n)return a}}catch(c){i.e(c)}finally{i.f()}},addItem:function(e,n){return t[e]?t[e]=[].concat(Object(F.a)(t[e]),[n]):t[e]=[n],t},addItemStart:function(e,n){return t[e]=[n].concat(Object(F.a)(t[e])),t},delItemById:function(e,n){return t[e]=t[e].filter((function(t){return t.getId()!==n})),t},delItemByIndex:function(e,n){return t[e]=t[e].filter((function(t,e){return e!==n})),t},delItemByKey:function(e,n){return t[e]=t[e].filter((function(t){return t.getKey()!==n})),t},modItemById:function(e,n){return t[e]=t[e].map((function(t){return t.getId()===n.getId()?n:t})),t},modItemByIndex:function(e,n,r){return t[e]=t[e].map((function(t,e){return e===r?n:t})),t},modItemByKey:function(e,n){return t[e]=t[e].map((function(t){return t.getKey()===n.getKey()?n:t})),t}}},Q=function(t){return{belongRange:function(t,e,n){return t<=n&&n<=e},belongRangeMax:function(t,e,n){return t<=n&&n<=e},belongRangeMin:function(t,e,n){return t<=n&&n<=e},outRange:function(t,e,n){return n<=t&&e<=n}}},X=function(){var t={};return Object.assign(t,function(t){return Object(q.a)({},Q(t))}(t)),t}(),Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(q.a)({},t),n=function(t){return Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)({},J(t)),z(t)),U(t)),M(t)),V(t))};return Object.assign(e,n(e)),e},Z=function(t){return{getStepByTimeWithRange:function(e){var n=0,r=0,i=0;return{item:t.items.find((function(t){return n=r,r+=t.duration,i++,X.belongRange(n,r,e)})),min:n,max:r,index:i}},getStepByTime:function(e){return t.getStepByTimeWithRange(e).item},getStepInstant:function(e){var n=t.getStepByTimeWithRange(e),r=n.item,i=n.min,a=i?e-i:e;return{time:a,percent:r?a/r.duration:0}},getStepTime:function(e){return t.getStepInstant(e).time},getStepPercent:function(e){return t.getStepInstant(e).percent},getDuration:function(){var e=0;return t.items.map((function(t){return e+=t.duration})),e},getPercent:function(e){return e/t.getDuration()},isEnded:function(e){return e>=t.getDuration()},getRemainingSteps:function(e){var n=t.getStepByTimeWithRange(e).index;return t.items.filter((function(t,e){return e>=n}))},getStepStartTime:function(e){var n,r=0,i=Object(_.a)(t.items);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.id===e)break;r+=a.duration}}catch(c){i.e(c)}finally{i.f()}return r}}},$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(q.a)({},t),n=function(t){return Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)(Object(q.a)({},J(t)),z(t)),H(t)),Z(t)),V(t))};return Object.assign(e,n(e)),e},tt="CURR_TRAINING_SET",et="TRAINING_LIST_SET",nt="TRAINING_ADD",rt="TRAINING_MOD",it="TRAINING_DEL",at="TRAINING_MOVE",ct=function(t){return{type:tt,payload:t}},ot=Object(m.a)((function(t){return{root:{}}})),ut=Object(L.b)((function(t){return{training:t.currTraining}}))((function(t){var e=ot(),n=t.dispatch,i=t.training,a=t.open,c=t.handleClose,o=G.b({title:G.c("Entrer le nom de l'exercice").min(3,"Le nom doit faire minimum 3 caracteres").required("Le nom est requis"),duration:G.a("Entrer le nombre de secondes").required("requis").positive("superieur ou egal a 0").integer("nombre entier").default(30),reposDuration:G.a("Entrer le nombre de secondes").required("requis").min(0,"minimum 0").integer("nombre entier").default(30)}),u=Object(W.a)({initialValues:{title:""},validationSchema:o,onSubmit:function(t){var e=$(i),r=1e3*t.duration,a=1e3*t.reposDuration,c=Y().setId(e.items.length);if(c.setTitle(t.title).setDuration(r).show(),e.addItem("items",c),"0"!==t.reposDuration){console.log(t.reposDuration);var o=Y().setId(e.items.length);o.setTitle("Repos").setDuration(a).hide(),e.addItem("items",o)}n(ct(e))}});return Object(r.jsx)("div",{className:e.root,children:Object(r.jsx)(w.a,{open:a,onClose:c,"aria-labelledby":"form-dialog-title",fullWidth:!0,children:Object(r.jsxs)("form",{onSubmit:u.handleSubmit,children:[Object(r.jsx)(k.a,{id:"form-dialog-title",children:"Nouvel exercice"}),Object(r.jsxs)(E.a,{children:[Object(r.jsx)(K.a,{autoFocus:!0,margin:"dense",id:"title",name:"title",label:"Nom de l'exercice",type:"text",fullWidth:!0,value:u.values.title,onChange:u.handleChange,error:u.touched.title&&Boolean(u.errors.title),helperText:u.touched.title&&u.errors.title}),Object(r.jsx)(K.a,{margin:"dense",id:"duration",name:"duration",label:"Duree de l'exercice",type:"text",fullWidth:!0,value:u.values.duration,onChange:u.handleChange,error:u.touched.duration&&Boolean(u.errors.duration),helperText:u.touched.duration&&u.errors.duration}),Object(r.jsx)(K.a,{margin:"dense",id:"reposDuration",name:"reposDuration",label:"Duree du repos apres l'exercice",type:"text",fullWidth:!0,value:u.values.reposDuration,onChange:u.handleChange,error:u.touched.reposDuration&&Boolean(u.errors.reposDuration),helperText:u.touched.reposDuration&&u.errors.reposDuration})]}),Object(r.jsx)(P.a,{children:Object(r.jsx)(f.a,{variant:"outlined",color:"secondary",startIcon:Object(r.jsx)(B.a,{}),fullWidth:!0,type:"submit",children:"Ajouter l'exercice"})})]})})})})),st=Object(m.a)((function(t){return{root:{},paper:{margin:10},list:{justifyContent:"center"},iconContainer:{justifyContent:"flex-end"},endListButton:{marginLeft:"auto",marginRight:"auto"},trainingButtonContainer:{position:"absolute",display:"flex",width:"100%",bottom:10},trainingButton:{flex:1,marginLeft:10,marginRight:10}}})),lt=Object(L.b)((function(t){return{training:$(t.currTraining)}}))((function(t){var e=t.dispatch,n=t.training,i=st(),c=a.a.useState(!1),o=Object(l.a)(c,2),u=o[0],s=o[1];return Object(r.jsxs)("div",{className:i.root,children:[Object(r.jsx)(x,{title:"Tabata"}),Object(r.jsx)(d.a,{variant:"outlined",className:i.paper,children:Object(r.jsxs)(y.a,{className:i.list,children:[n.items.map((function(t,i){var a=Y(t);return Object(r.jsx)(A,{title:a.title,time:a.duration,onDelete:function(){var t=$(n);t.delItemByIndex("items",i),e(ct(t))}},i)})),Object(r.jsx)(I.a,{children:Object(r.jsx)(f.a,{variant:"outlined",color:"secondary",onClick:function(){return s(!0)},startIcon:Object(r.jsx)(B.a,{}),className:i.endListButton,children:"Ajouter"})})]})}),Object(r.jsx)("div",{className:i.trainingButtonContainer,children:Object(r.jsx)(f.a,{variant:"contained",color:"primary",href:"#/training",className:i.trainingButton,children:"Entrainement"})}),Object(r.jsx)(ut,{open:u,handleClose:function(){return s(!1)}})]})})),dt=n(306),ft=function(t){var e={};return Object.assign(e,function(t){return Object(q.a)(Object(q.a)({},V(t)),function(t){return Object(q.a)(Object(q.a)({},function(t){return{getActions:function(){return t.actions},setActions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.actions=e,t},can:function(e){return!(!t.actions||!t.actions.find((function(t){return t===e})))}}}(t)),{},{initTimer:function(){return t.time=0,t.isRunning=!1,t.actions=["play"],t},setTime:function(e){return t.time=e,t},increment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return isNaN(t.time)&&(t.time=0),t.time+=e,t},decrement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return t.time-e>=0?t.time-=e:t.time=0,t},play:function(){return t.isRunning=!0,t.actions=["pause","stop"],t},replay:function(){return t.time=0,t.isRunning=!0,t.actions=["pause","stop"],t},pause:function(){return t.isRunning=!1,t.actions=["play","replay"],t},stop:function(){return t.time=0,t.isRunning=!1,t.actions=["play"],t}})}(t))}(e)),t&&e.fromLastState(t),e},mt=Object(m.a)((function(t){return{root:{},body:{display:"flex",flexDirection:"column",height:"100%",alignItems:"center"},title:{paddingTop:50,paddingBottom:50,textAlign:"center"},progressArea:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginBottom:"6rem"},circleOutBg:{color:t.palette.grey["light"===t.palette.type?200:700]},circleOut:{marginTop:"-16rem"},circleInBg:{marginTop:"-14.5rem",color:t.palette.grey["light"===t.palette.type?200:700]},circleIn:{marginTop:"-13rem"},timer:{marginTop:"-8.5rem"},paper:{marginTop:30,margin:10,width:"90%",height:"20%","overflow-y":"scroll"},list:{justifyContent:"center"},iconContainer:{justifyContent:"flex-end"},endListButton:{marginLeft:"auto",marginRight:"auto"},trainingButtonContainer:{position:"absolute",display:"flex",justifyContent:"center",width:"100%",bottom:10},trainingButton:{width:"90%",marginLeft:10,marginRight:10},time:{textAlign:"end"}}})),jt=function(){var t=Object(i.useState)(ft().initTimer()),e=Object(l.a)(t,2),n=e[0],r=e[1];return Object(i.useEffect)((function(){var t=setInterval((function(){n&&n.isRunning&&r(Object(q.a)({},ft(n).increment()))}),1e3);return function(){return clearInterval(t)}}),[n]),{timer:n,play:function(){return r(Object(q.a)({},ft(n).play()))},replay:function(){return r(Object(q.a)({},ft(n).replay()))},pause:function(){return r(Object(q.a)({},ft(n).pause()))},stop:function(){return r(Object(q.a)({},ft(n).stop()))},setTime:function(t){return r(Object(q.a)({},ft(n).setTime(t)))}}},bt=Object(L.b)((function(t){return{training:$(t.currTraining)}}))((function(t){var e=mt(),n=t.training,i=(t.dispatch,jt()),a=i.timer,c=i.play,o=i.replay,u=i.pause,s=i.stop,l=i.setTime,m=a?a.time:0;return n.isEnded(m)&&s(),Object(r.jsxs)("div",{className:e.root,children:[Object(r.jsx)(x,{title:"Training",backIcon:!0}),Object(r.jsxs)("div",{className:e.body,children:[Object(r.jsx)(g.a,{className:e.title,variant:"h4",color:"secondary",children:n.getStepByTime(m).title}),Object(r.jsxs)("div",{className:e.progressArea,children:[Object(r.jsx)(dt.a,{variant:"determinate",value:100,size:"16rem",className:e.circleOutBg}),Object(r.jsx)(dt.a,{variant:"determinate",value:100*n.getPercent(m),size:"16rem",className:e.circleOut}),Object(r.jsx)(dt.a,{variant:"determinate",value:100,size:"13rem",className:e.circleInBg,color:"secondary"}),Object(r.jsx)(dt.a,{variant:"determinate",value:100*n.getStepPercent(m),size:"13rem",className:e.circleIn,color:"secondary"}),Object(r.jsxs)(g.a,{className:e.timer,variant:"h2",color:"secondary",children:[n.getStepTime(m)/1e3,"s"]})]}),Object(r.jsx)(d.a,{variant:"outlined",className:e.paper,children:Object(r.jsx)(y.a,{className:e.list,children:n.getRemainingSteps(m).map((function(t,i){return Object(r.jsxs)(I.a,{button:!0,onClick:function(){return l(n.getStepStartTime(t.id))},children:[Object(r.jsx)(C.a,{primary:t.title}),Object(r.jsx)(C.a,{primary:"".concat(t.duration/1e3,"s"),className:e.time})]},"".concat(i))}))})}),Object(r.jsxs)("div",{className:e.trainingButtonContainer,children:[Object(r.jsx)(f.a,{disabled:!a.can("play"),variant:"contained",color:"primary",onClick:function(){return c()},className:e.trainingButton,children:"Play"}),Object(r.jsx)(f.a,{disabled:!a.can("pause"),variant:"contained",color:"primary",onClick:function(){return u()},className:e.trainingButton,children:"Pause"}),Object(r.jsx)(f.a,{disabled:!a.can("stop"),variant:"contained",color:"primary",onClick:function(){return s()},className:e.trainingButton,children:"Stop"}),Object(r.jsx)(f.a,{disabled:!a.can("replay"),variant:"contained",color:"primary",onClick:function(){return o()},className:e.trainingButton,children:"Replay"})]})]})]})}));function gt(){return Object(r.jsx)(u.a,{basename:"/tabata/",children:Object(r.jsxs)(s.c,{children:[Object(r.jsx)(s.a,{exact:!0,path:"/",children:Object(r.jsx)(lt,{})}),Object(r.jsx)(s.a,{path:"/training",children:Object(r.jsx)(bt,{})})]})})}n(259);var pt=n(134),Ot=function(){return $().setId("default").setCollection("items",[])},ht=$();ht.setId("default").setCollection("items",[]);var vt=function(){return{list:[ht]}},xt=Object(pt.b)({trainingList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt(),e=arguments.length>1?arguments[1]:void 0;switch(e.type){case et:var n=Object(q.a)(Object(q.a)({},t),{},{list:Object(F.a)(e.payload)});return n;case nt:var r=[].concat(Object(F.a)(t.list),[e.payload]),i=Object(q.a)(Object(q.a)({},t),{},{list:r});return i;case rt:var a=Object(q.a)({},e.payload),c=t.list.map((function(t){var e=$(t);return e.getId()===a.getId()?a:e})),o=Object(q.a)(Object(q.a)({},t),{},{list:c});return o;case it:var u=Object(q.a)({},e.payload),s=t.list.filter((function(t){return $(t).getId()!==u.getId()})),l=Object(q.a)(Object(q.a)({},t),{},{list:s});return l;case at:var d=e.payload,f=d.indexA,m=d.indexB,j=Object(F.a)(t.list),b=j[f];j[f]=j[m],j[m]=b;var g=Object(q.a)(Object(q.a)({},t),{},{list:j});return g;default:return t}},currTraining:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot(),e=arguments.length>1?arguments[1]:void 0;switch(e.type){case tt:var n=Object(q.a)({},e.payload);return n;default:return t}}});var yt=Object(pt.c)(xt,function(){try{var t=localStorage.getItem("persistantState");if(null===t)return;return JSON.parse(t)}catch(e){return void console.warn(e)}}());yt.subscribe((function(){return function(t){try{var e=JSON.stringify(t);localStorage.setItem("persistantState",e)}catch(n){console.warn(n)}}(yt.getState())}));var It=function(){return Object(r.jsx)(L.a,{store:yt,children:Object(r.jsx)("div",{id:"app",children:Object(r.jsx)(gt,{})})})},Nt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,311)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),r(t),i(t),a(t),c(t)}))};o.a.render(Object(r.jsx)(It,{}),document.getElementById("root")),Nt()}},[[260,1,2]]]);
//# sourceMappingURL=main.edec3b34.chunk.js.map